<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>화면</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
</head>
<body>
    <section id="main">
        <div class="main" style=" width : 100vw; height: 200vh; position: relative;">
            <div class="main-page-wrap" style="width : 100vw; height: 100vh;">
                <div class="black-bg"></div>
                <div class="img-container"></div>
                <h1 class="bg-text">ENGLISH</h1>
                <div class="memo-container">
                    <ul class="memo-wrap">
                        <li>
                            <span>첫번째 버튼 내용 표출</span>
                            <h3>내용에 대한 타이틀</h3>
                            <p>국회나 그 위원회의 요구가 있을 때에는 국무총리·국무위원 또는 정부위원은 출석·답변하여야 하며, 국무총리 또는 국무위원이 출석요구를 받은 때에는 국무위원 또는 정부위원으로 하여금 출석·답변하게 할 수 있다.</p>
                        </li>
                        <li>
                            <span>두번째 버튼 내용 표출</span>
                            <h3>내용에 대한 타이틀</h3>
                            <p>국회나 그 위원회의 요구가 있을 때에는 국무총리·국무위원 또는 정부위원은 출석·답변하여야 하며, 국무총리 또는 국무위원이 출석요구를 받은 때에는 국무위원 또는 정부위원으로 하여금 출석·답변하게 할 수 있다.</p>
                        </li>
                        <li>
                            <span>세번째 버튼 내용 표출</span>
                            <h3>내용에 대한 타이틀</h3>
                            <p>국회나 그 위원회의 요구가 있을 때에는 국무총리·국무위원 또는 정부위원은 출석·답변하여야 하며, 국무총리 또는 국무위원이 출석요구를 받은 때에는 국무위원 또는 정부위원으로 하여금 출석·답변하게 할 수 있다.</p>
                        </li>
                        <li>
                            <span>네번째 버튼 내용 표출</span>
                            <h3>내용에 대한 타이틀</h3>
                            <p>국회나 그 위원회의 요구가 있을 때에는 국무총리·국무위원 또는 정부위원은 출석·답변하여야 하며, 국무총리 또는 국무위원이 출석요구를 받은 때에는 국무위원 또는 정부위원으로 하여금 출석·답변하게 할 수 있다.</p>
                        </li>
                    </ul>
                </div>
                <div class="button-wrap">
                    <button>
                        <img src="" alt="첫번째 아이콘 기본정보">
                    </button>
                    <button>
                        <img src="" alt="첫번째 아이콘 힘">
                    </button>
                    <button>
                        <img src="" alt="첫번째 아이콘 인간관계">
                    </button>
                    <button>
                        <img src="" alt="첫번째 아이콘 지식">
                    </button>
                </div>
            </div>
            
            <div class="goal" style="width : 100vw; height: 100vh; position: relative;">
                    <!-- modal img -->
                    <div class="first-modal">
                        <div class="modal-wrap-container">
                            <div class="modal-wrap">
                                <div class="first-modal-wrap">
                                    <div class="click-button-wrap">
                                        <div class="friend-button first-friend">
                                            <div class="friend-img">
                                                <img src="" alt="">
                                            </div>
                                            <span>아무개</span>
                                        </div>
                                        <div class="friend-button second-friend">
                                            <div class="friend-img">
                                                <img src="" alt="">
                                            </div>
                                            <span>아무개</span>
                                        </div>
                                        <div class="friend-button third-friend">
                                            <div class="friend-img">
                                                <img src="" alt="">
                                            </div>
                                            <span>아무개</span>
                                        </div>
                                    </div>
                                    <div class="friend-text-area">
                                        <div class="text-container">
                                            <div class="text-container-wrapper">
                                                <p>첫번째 컨텐츠 내용에 대해 설명하며,,,국회의원이 회기전에 체포 또는 구금된 때에는 현행범인이 아닌 한 국회의 요구가 있으면 회기중 석방된다. 국회는 법률에 저촉되지 아니하는 범위안에서 의사와 내부규율에 관한 규칙을 제정할 수 있다.</p>
                                                <p>두번째 컨텐츠 내용에 대해 설명하며,,,국회의원이 회기전에 체포 또는 구금된 때에는 현행범인이 아닌 한 국회의 요구가 있으면 회기중 석방된다. 국회는 법률에 저촉되지 아니하는 범위안에서 의사와 내부규율에 관한 규칙을 제정할 수 있다.</p>
                                                <p>세번째 컨텐츠 내용에 대해 설명하며,,,회의원이 회기전에 체포 또는 구금된 때에는 현행범인이 아닌 한 국회의 요구가 있으면 회기중 석방된다. 국회는 법률에 저촉되지 아니하는 범위안에서 의사와 내부규율에 관한 규칙을 제정할 수 있다.</p>
                                            </div>
                                        </div>
                                        <span class="speech-bubble green">아무개</span>
                                    </div>
                                </div>
                                <div class="second-modal-wrap"></div>
                            </div>
                        </div>
                        <span>scorll down</span>
                        <div class="recod-button">
                            <img src="" alt="이력관련 버튼">
                        </div>
                    </div>
                    <!-- /.//modal img -->
            </div>
        </div>

        <div id="text-container" style="width: 1200px; height: 100vh; position: relative; margin: 0 auto; margin-top: 120px;">
            <div class="ex_box ex_box1" style="position: absolute; top: 0; left: 10%; opacity: 0;"></div>
            <div class="ex_box ex_box2" style="position: absolute; top: 50%; left: 40%; transform: translate(-50%, -50%); opacity: 0;"></div>
            <div class="ex_box ex_box3" style="position: absolute; bottom: 0%; right: 0%; opacity: 0;"></div>
        </div>
    
        <div id="comment-container" style="height: 100vh;">
            <h4>근로조건의 기준은 인간의 존엄성을 보장하도록 법률로 정한다. <br>
                대법원은 법률에 저촉되지 아니하는 범위안에서 소송에 관한 절차,
            </h4>
            <div class="comment-container-wrap">
                <div class="text-wrap">
                    국회는 국가의 예산안을 심의·확정한다. 국방상 또는 국민경제상 긴절한 필요로 인하여 법률이 정하는 경우를 제외하고는, 사영기업을 국유 또는 공유로 이전하거나 그 경영을 통제 또는 관리할 수 없다.
                    국회는 의원의 자격을 심사하며, 의원을 징계할 수 있다. 대통령은 국가의 독립·영토의 보전·국가의 계속성과 헌법을 수호할 책무를 진다. 국무위원은 국무총리의 제청으로 대통령이 임명한다.
                    국가는 법률이 정하는 바에 의하여 재외국민을 보호할 의무를 진다. 국무총리 또는 행정각부의 장은 소관사무에 관하여 법률이나 대통령령의 위임 또는 직권으로 총리령 또는 부령을 발할 수 있다.
                    누구든지 체포 또는 구속의 이유와 변호인의 조력을 받을 권리가 있음을 고지받지 아니하고는 체포 또는 구속을 당하지 아니한다. 체포 또는 구속을 당한 자의 가족등 법률이 정하는 자에게는 그 이유와 일시·장소가 지체없이 통지되어야 한다.
                    대통령은 법률에서 구체적으로 범위를 정하여 위임받은 사항과 법률을 집행하기 위하여 필요한 사항에 관하여 대통령령을 발할 수 있다. 계엄을 선포한 때에는 대통령은 지체없이 국회에 통고하여야 한다.
                    대통령이 궐위된 때 또는 대통령 당선자가 사망하거나 판결 기타의 사유로 그 자격을 상실한 때에는 60일 이내에 후임자를 선거한다. 헌법개정안은 국회가 의결한 후 30일 이내에 국민투표에 붙여 국회의원선거권자 과반수의 투표와 투표자 과반수의 찬성을 얻어야 한다.
                    모든 국민은 고문을 받지 아니하며, 형사상 자기에게 불리한 진술을 강요당하지 아니한다. 각급 선거관리위원회의 조직·직무범위 기타 필요한 사항은 법률로 정한다.
                    제1항의 지시를 받은 당해 행정기관은 이에 응하여야 한다. 국채를 모집하거나 예산외에 국가의 부담이 될 계약을 체결하려 할 때에는 정부는 미리 국회의 의결을 얻어야 한다.
                    모든 국민은 헌법과 법률이 정한 법관에 의하여 법률에 의한 재판을 받을 권리를 가진다. 국가는 균형있는 국민경제의 성장 및 안정과 적정한 소득의 분배를 유지하고, 시장의 지배와 경제력의 남용을 방지하며, 경제주체간의 조화를 통한 경제의 민주화를 위하여 경제에 관한 규제와 조정을 할 수 있다.
                    국회의원은 법률이 정하는 직을 겸할 수 없다. 국가는 농수산물의 수급균형과 유통구조의 개선에 노력하여 가격안정을 도모함으로써 농·어민의 이익을 보호한다.
                    타인의 범죄행위로 인하여 생명·신체에 대한 피해를 받은 국민은 법률이 정하는 바에 의하여 국가로부터 구조를 받을 수 있다. 이 헌법은 1988년 2월 25일부터 시행한다. 다만, 이 헌법을 시행하기 위하여 필요한 법률의 제정·개정과 이 헌법에 의한 대통령 및 국회의원의 선거 기타 이 헌법시행에 관한 준비는 이 헌법시행 전에 할 수 있다.약을 체결하려 할 때에는 정부는 미리 국회의 의결을 얻어야 한다.
                    모든 국민은 헌법과 법률이 정한 법관에 의하여 법률에 의한 재판을 받을 권리를 가진다. 국가는 균형있는 국민경제의 성장 및 안정과 적정한 소득의 분배를 유지하고, 시장의 지배와 경제력의 남용을 방지하며, 경제주체간의 조화를 통한 경제의 민주화를 위하여 경제에 관한 규제와 조정을 할 수 있다.
                    국회의원은 법률이 정하는 직을 겸할 수 없다. 국가는 농수산물의 수급균형과 유통구조의 개선에 노력하여 가격안정을 도모함으로써 농·어민의 이익을 보호한다.
                    타인의 범죄행위로 인하여 생명·신체에 대한 피해를 받은 국민은 법률이 정하는 바에 의하여 국가로부터 구조를 받을 수 있다. 이 헌법은 1988년 2월 25일부터 시행한다. 다만, 이 헌법을 시행하기 위하여 필요한 법률의 제정·개정과 이 헌법에 의한 대통령 및 국회의원의 선거 기타 이 헌법시행에 관한 준비는 이 헌법시행 전에 할 수 있다.
                </div>
                <div class="comment-container-image-container"></div>
                <div class="comment-container-image-text-conainer-wrap">
                    <div class="comment-image-text-wrap">
                        <div class="comment-image-container"></div>
                        <span>대통령은 취임에 즈음하여 다음의 선서를 한다. 대통령은 필요하다고 인정할 때에는 외교·국방·통일 기타 국가안위에 관한 중요정책을 국민투표에 붙일 수 있다.</span>
                    </div>
                    <div class="comment-image-text-wrap">
                        <div class="comment-image-container"></div>
                        <span>대통령은 취임에 즈음하여 다음의 선서를 한다. 대통령은 필요하다고 인정할 때에는 외교·국방·통일 기타 국가안위에 관한 중요정책을 국민투표에 붙일 수 있다.</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section id="slide-container" style="position: relative;">
        <div class="container" style="position: relative;">

            <div class="fixed-box"></div>

            <div class="description panel blue" style="margin-left: 470px; background-color:  rgba(119, 119, 241, 0.2);  width: 100%;">
            
            </div>

            <section class="panel" style="background-color: rgba(233, 126, 126, 0.2); width: 100%;">
              
            </section>

            <section class="panel orange" style="background-color: rgb(240, 179, 66, 0.2); width: 100%;">
            
            </section>

            <section class="panel purple" style="background-color: rgb(218, 121, 218 , 0.2); width: 100%;">

            </section>

            <section class="panel green" style="background-color: rgb(129, 216, 129, 0.2); width: 100%;">

            </section>
          
          </div>

    </section>

    <section id="comment-container" style="height: 100vh;">
        <div class="box" style="width: 300px; height: 300px; background-color: red;"></div>
    </section>




    <script src="script/index.js"></script>
    <script>
    gsap.registerPlugin(ScrollTrigger);
    
    gsap.to(".ex_box1", {
        scrollTrigger: {
            trigger: ".ex_box1", // ex_box1을 트리거로 설정
            start:  "0% 50%",
            end: "100% 65%",
            toggleActions: "play restart reset none" // 스크롤 방향에 따라 재생할 액션 설정
        },
        x: 100,
        opacity: 1,
        duration: 2
    });

    gsap.to(".ex_box2", {
        scrollTrigger: {
            trigger: ".ex_box2", // ex_box2를 트리거로 설정
            start:  "0% 50%",
            end: "100% 65%",
            toggleActions: "play restart none none" // 스크롤 방향에 따라 재생할 액션 설정
        },
        x: 100,
        opacity: 1,
        duration: 2
    });

    gsap.to(".ex_box3", {
        scrollTrigger: {
            trigger: ".ex_box3", // ex_box3를 트리거로 설정
            start:  "0% 50%",
            end: "100% 65%",
            toggleActions: "play restart none none" // 스크롤 방향에 따라 재생할 액션 설정
        },
        x: 100,
        opacity: 1,
        duration: 2
    });


    let sections = gsap.utils.toArray(".panel");

    let tl = gsap.timeline({
        scrollTrigger: {
            trigger: ".main-page-wrap",
            pin: true,
            start: "top top",  
            end: "+=1920", 
        }
    });

    gsap.set(".black-bg", {
        display: "none",  
        opacity: 0,       
        scale: 0.5       
    });

    // modal 이벤트
    gsap.registerPlugin(ScrollTrigger);

    const textContainer = document.querySelector('.text-container');
    let initialScrollY = 0; 

    // 스크롤이 163px 맞춰 움직이도록 이벤트 설정
    function syncScroll() {
        const currentScrollY = window.scrollY;
        const scrollDifference = currentScrollY - initialScrollY;
        const steps = Math.floor(scrollDifference / 163);
        textContainer.scrollTop = steps * 163;
        const friendButtons = document.querySelectorAll('.friend-button');
        const speechBubble = document.querySelector('.speech-bubble'); 
        
        const speechTexts = [
            "첫 번째",
            "두 번째",
            "세에 번째"
        ];

        friendButtons.forEach((button, index) => {
            if (index === steps % friendButtons.length) {
                button.classList.add('button-active');
            } else {
                button.classList.remove('button-active');
            }
        });

        textContainer.scrollTop = steps * 163;

        // .speach-bubble의 innerHTML 변경
        if (steps < speechTexts.length) {
            speechBubble.innerHTML = speechTexts[steps % speechTexts.length];
        } else {
            speechBubble.innerHTML = speechTexts[speechTexts.length - 1]; // 마지막 텍스트 유지
        }
    }

    ScrollTrigger.create({
        trigger: ".goal",
        start: "top top",
        end: "bottom+=920 top",
        pin: true,
        pinSpacing: false,
        markers: {
            startColor: "green",
            endColor: "red",
            fontSize: "1rem",
        },
        onEnter: () => {
            gsap.to(".first-modal", {
                opacity: 1,
                duration: 1,
                ease: "power1.out",
                css: { display: "block", opacity: "1", transform: "scale(1) translate(50%, 0%)" }
            });
            gsap.to(".goal", {
                opacity: 1,
                scale: 1,
                duration: 1,
                css: { display: "block", opacity: "1", transform: "scale(1)" }
            });

            initialScrollY = window.scrollY;

            // 스크롤 위임 이벤트
            window.addEventListener('scroll', syncScroll);
        },
        onLeaveBack: () => {
            gsap.to(".first-modal", { opacity: 0, duration: 1 });
            gsap.to(".goal", { opacity: 0 });

            // 스크롤 위임 이벤트 해제
            window.removeEventListener('scroll', syncScroll);
        },
    });

    window.scrollTo(0, 0);

    
    gsap.to(sections, {
        xPercent: -100 * (sections.length),
        ease: "none",
        scrollTrigger: {
            trigger: ".container",
            pin: true,
            start: "0% 30%",
            scrub: 1,
            snap: 1 / (sections.length - 1),
            end: "+=1200",
            onComplete: () => {
                gsap.to(sections, { xPercent: 0, ease: "none" });
            }
        }
    });

    const memolist = document.querySelectorAll('.memo-wrap li')
    const button = document.querySelectorAll('.button-wrap button')

    // main 버튼 클릭 시 해당 내용 표출
    button.forEach((element, index) => {
        element.addEventListener('click', () => {
            memolist.forEach((memo, memoIndex) => {
                switch (index + 1) {
                    case 1:
                        if (memoIndex === 0) {
                            memo.style.display = 'block';
                        } else {
                            memo.style.display = 'none';
                        }
                        break;
                    case 2:
                        if (memoIndex === 1) {
                            memo.style.display = 'block';
                        } else {
                            memo.style.display = 'none';
                        }
                        break;
                    case 3:
                        if (memoIndex === 2) {
                            memo.style.display = 'block';
                        } else {
                            memo.style.display = 'none';
                        }
                        break;
                    case 4:
                        if (memoIndex === 3) {
                            memo.style.display = 'block';
                        } else {
                            memo.style.display = 'none';
                        }
                        break;
                    default:
                        break;
                }
            });
        });
    });


    </script>

</body>
</html>